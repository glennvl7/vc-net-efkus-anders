<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Landverovertje Brugge</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      margin: 0; padding: 20px;
      background: #F5F5F5;
      color: white;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
    }
    svg {
      width: 90vw;
      max-width: 600px;
      height: auto;
      border: 2px solid #F5F5F5;
      margin-bottom: 30px;
      background-color: #F5F5F5;
    }
    .zone {
      cursor: default;
      transition: fill 0.3s ease;
      stroke: #222;
      stroke-width: 1;
    }
    #countdown {
      display: flex;
      justify-content: center;
      margin-bottom: 30px;
      font-size: 3rem;
      letter-spacing: 0.1em;
      font-weight: 700;
      font-family: 'Courier New', Courier, monospace;
      background: #222;
      padding: 10px 30px;
      border-radius: 12px;
      user-select: none;
      box-shadow: 0 0 15px #F5F5F5;
    }
    .segment {
      position: relative;
      width: 3ch;
      text-align: center;
      margin: 0 5px;
      color: #F5F5F5;
    }
    .colon {
      width: 1ch;
      color: #F5F5F5;
    }
    #leaderboard {
      display: flex;
      gap: 40px;
      justify-content: center;
      width: 100%;
      max-width: 600px;
    }
    .team {
      background: #292928;
      border-radius: 12px;
      padding: 15px 25px;
      flex: 1;
      min-width: 140px;
      box-shadow: 0 0 10px #000;
      text-align: center;
    }
    .team-color {
      width: 40px;
      height: 40px;
      margin: 0 auto 10px auto;
      border-radius: 50%;
      box-shadow: 0 0 12px;
    }
    .team1 { background-color: #1A1819; box-shadow: 0 0 10px #1A1819; }
    .team2 { background-color: #FFE87C; box-shadow: 0 0 10px #FFE87C; }
    .team3 { background-color: #CA3433; box-shadow: 0 0 10px #CA3433; }
    .team4 { background-color: #FA8128; box-shadow: 0 0 10px #FA8128; }
    .team-name {
      font-size: 1.3rem;
      margin-bottom: 6px;
    }
    .team-score {
      font-size: 2.5rem;
      font-weight: 900;
      font-family: 'Courier New', Courier, monospace;
    }
    #logbook {
      margin-top: 40px;
      width: 100%;
      max-width: 600px;
    }
    #logbook h2 {
      text-align: center;
    }
    #log-entries {
      list-style: none;
      padding: 0;
      margin: 0;
      font-family: 'Courier New', Courier, monospace;
    }
    #log-entries li {
      margin-bottom: 4px;
    }
  </style>
</head>
<body>

  <div id="countdown" aria-label="Countdown timer">
    <div id="hours" class="segment">00</div>
    <div class="colon">:</div>
    <div id="minutes" class="segment">00</div>
    <div class="colon">:</div>
    <div id="seconds" class="segment">00</div>
  </div>

  <!-- SVG Map -->
  <svg viewBox="0 0 800 1000" aria-label="City center of Brugge divided into zones" role="img" >
  <path class="zone" id="path4" d="M 531.39075,13.788582 C 504.87424,38.53732 504.87424,38.183766 504.87424,38.183766 l -57.27565,13.788582 -46.31549,16.61701 -74.24621,50.911692 -13.78859,15.55635 6.01041,94.7523 213.54625,-12.37436 18.73833,-26.51651 18.73833,-19.79899 10.25305,-20.5061 10.96015,-26.16295 15.2028,-12.37437 26.5165,-8.13172 22.27387,-3.53554 L 693.3182,88.741901 673.51921,42.77996 660.43773,34.294679 629.67859,39.59798 590.43416,38.183766 558.2608,26.162951 Z" />More actions
  <path class="zone" id="path5" d="m 692.96465,89.095455 69.65001,206.828735 -23.33452,6.01041 -137.88582,62.22539 -85.55992,27.93072 -6.71752,-21.56676 10.96016,-51.61879 10.25305,-30.75915 -0.35356,-54.44722 6.01041,-18.38477 16.97056,-25.8094 18.38478,-18.03123 20.5061,-45.60838 14.84924,-13.78859 25.8094,-7.77817 21.92031,-3.53553 z" />
  <path class="zone" id="path6" d="m 319.61227,229.8097 0.7071,83.4386 -3.18198,46.66905 2.47488,17.67767 19.79899,20.15254 15.55634,-1.06066 49.49748,-26.5165 32.52691,-6.01041 28.63783,0.35356 42.77996,4.59619 12.02081,-51.26524 10.25305,-29.69849 -0.35355,-56.92209 5.3033,-14.84924 z" />
  <path class="zone" id="path7" d="m 312.18764,135.0574 -30.75914,22.98097 -32.17336,28.63782 -76.72109,61.16474 -38.89087,66.82159 118.44039,147.07821 22.62741,-27.93072 30.05204,-22.62742 33.58758,-12.37437 -18.38478,-20.50609 -2.82843,-18.73833 3.88909,-48.08326 -1.41421,-82.02439 z" />
  <path class="zone" id="path8" d="m 132.93607,314.66252 -45.254829,127.98633 37.476659,61.87184 62.2254,126.21856 10.25305,-43.48707 7.42462,-32.52691 36.416,-78.84241 9.89949,-14.49568 z" />
  <path class="zone" id="path9" d="m 86.974134,442.29529 -45.608387,185.96909 -5.303301,39.95153 4.596194,51.26524 95.45942,-23.68808 25.10229,-4.59619 33.94112,-4.59619 -7.07107,-55.50789 -62.9325,-127.27922 z" />
  <path class="zone" id="path10" d="m 40.65864,719.8347 23.688077,112.07643 14.495689,27.22361 37.830214,36.416 34.64823,8.48528 30.05204,15.55635 22.98097,-178.54446 -9.54594,-55.15433 -56.56854,9.19239 z" />
  <path class="zone" id="path11" d="m 192.6866,828.02204 172.88761,-29.34493 28.99137,65.05382 50.55814,102.88404 -62.9325,24.04163 -66.11449,-1.76777 -87.68124,-28.28427 -33.94113,-21.56675 -13.43502,-19.44544 z" />
  <path class="zone" id="path12" d="m 365.22065,797.97 51.97235,-32.17336 56.9221,-18.73833 138.59293,89.09546 -81.67084,73.5391 -58.33631,42.42641 -26.87005,14.14214 z" />
  <path class="zone" id="path13" d="m 198.69701,704.27835 69.29646,7.42463 37.83021,-13.43503 17.32412,12.37437 8.83883,-15.2028 92.98455,-56.9221 4.24264,16.26346 26.16295,42.77996 13.78858,28.28427 4.24264,21.56676 -55.15433,17.67767 -52.67945,32.17336 -172.18051,30.75914 11.66727,-87.32769 z" />
  <path class="zone" id="path14" d="m 197.28279,587.95929 67.88225,-14.84924 127.63278,-37.47666 8.48528,39.24442 29.34493,38.18377 -4.24264,25.45584 -94.39876,55.86144 -8.83883,15.9099 -17.67767,-11.66726 -38.18377,13.78858 -68.58935,-8.48528 -10.96016,-73.89266 z" />
  <path class="zone" id="path15" d="m 197.63635,586.54508 9.54594,-35.35534 42.77996,-88.38835 33.58757,-36.416 20.85965,-14.49569 33.58757,-12.72792 14.49569,-2.12132 24.74874,32.17336 6.71751,25.45584 1.06066,36.416 7.42462,43.13351 -133.64318,39.95154 z" />
  <path class="zone" id="path16" d="m 352.13918,397.39401 51.26524,-26.87006 32.88046,-6.36396 72.1249,4.94975 43.84062,124.80435 1.76776,39.59798 21.92031,24.39518 -147.78531,71.77134 2.82842,-15.9099 -29.69848,-38.89088 -16.61701,-82.73149 -0.70711,-39.95153 -6.01041,-22.98097 z" />
  <path class="zone" id="path17" d="m 516.89506,391.73716 85.55992,-27.93072 137.17871,-62.57895 23.68808,-4.94975 37.83021,166.8772 -26.16295,-2.12132 -31.1127,10.25305 -98.99495,65.05382 -43.84062,10.25305 -32.52691,-2.47487 -14.84924,-10.96016 -1.41421,-40.65864 z" />More actions
  <path class="zone" id="path18" d="m 612.70803,836.15377 65.76093,-70.71068 -17.32412,-14.49569 -63.99316,-158.74547 -21.56676,-34.64823 -147.07821,71.41778 -1.76777,9.54594 -1.76776,0.70711 4.24264,14.84924 41.36574,71.06423 2.82843,22.27387 z" />
  <path class="zone" id="path19" d="m 678.82251,765.44309 97.58074,-124.09724 23.33452,-51.61879 7.77817,-41.0122 -6.71751,-85.91347 -25.45584,-2.12132 -31.46626,9.89949 -97.93428,64.70027 -44.19418,10.96016 -31.8198,-2.12132 -15.90991,-11.66726 21.92031,24.39518 20.85965,34.64823 63.99317,160.15969 z" />
</svg>

   <!-- Leaderboard -->
  <div id="leaderboard">
    <div class="team">
      <div class="team-color team1"></div>
      <div class="team-name">Team 1</div>
      <div id="score-team1" class="team-score">0</div>
    </div>
    <div class="team">
      <div class="team-color team2"></div>
      <div class="team-name">Team 2</div>
      <div id="score-team2" class="team-score">0</div>
    </div>
    <div class="team">
      <div class="team-color team3"></div>
      <div class="team-name">Team 3</div>
      <div id="score-team3" class="team-score">0</div>
    </div>
    <div class="team">
      <div class="team-color team4"></div>
      <div class="team-name">Team 4</div>
      <div id="score-team4" class="team-score">0</div>
    </div>
  </div>

  <!-- Logbook -->

<div id="logbook">
  <h2 style="color: #222;">Laatste veroveringen</h2>
  <table id="logbookTable" border="1" cellpadding="8" cellspacing="0" style="width: 100%; border-collapse: collapse; color: white; background: #222;">
    <thead>
      <tr>
        <th>Gebied</th>
        <th>Tijd</th>
        <th>Vorig Team</th>
        <th>Nieuw Team</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>Zone A</td>
        <td>12:34</td>
        <td>Team 1</td>
        <td>Team 2</td>
      </tr>
      <tr>
        <td>Zone B</td>
        <td>12:30</td>
        <td>Team 3</td>
        <td>Team 1</td>
      </tr>
      <tr>
        <td>Zone C</td>
        <td>12:25</td>
        <td>Team 2</td>
        <td>Team 3</td>
      </tr>
      <tr>
        <td>Zone D</td>
        <td>12:20</td>
        <td>Team 1</td>
        <td>Team 3</td>
      </tr>
      <tr>
        <td>Zone E</td>
        <td>12:15</td>
        <td>Team 2</td>
        <td>Team 1</td>
      </tr>
    </tbody>
  </table>
</div>

<script>
  window.addEventListener('DOMContentLoaded', () => {
    const table = document.querySelector('#logbookTable tbody');
    const rows = Array.from(table.querySelectorAll('tr'));

    rows.sort((a, b) => {
      const timeA = a.children[1].textContent.trim();
      const timeB = b.children[1].textContent.trim();

      // Convert "HH:MM" to minutes for comparison
      const [hA, mA] = timeA.split(':').map(Number);
      const [hB, mB] = timeB.split(':').map(Number);
      const totalA = hA * 60 + mA;
      const totalB = hB * 60 + mB;

      return totalB - totalA; // Descending (most recent first)
    });

    // Append sorted rows
    rows.forEach(row => table.appendChild(row));
  });
</script>

  
  <div id="logbook">
    <h2></h2>
    <ul id="log-entries"></ul>
  </div>

  <script>
    const teamColors = {
      team1: '#1A1819',
      team2: '#FFE87C',
      team3: '#CA3433',
      team4: '#FA8128'
    };

    const areaTeamAssignment = {
      path4: teamColors.team1,
      path5: teamColors.team2,
      path6: teamColors.team3,
      path7: teamColors.team1,
      path8: teamColors.team2,
      path9: teamColors.team3,
      path10: teamColors.team1,
      path11: teamColors.team2,
      path12: teamColors.team3,
      path13: teamColors.team1,
      path14: teamColors.team2,
      path15: teamColors.team3,
      path16: teamColors.team1,
      path17: teamColors.team2,
      path18: teamColors.team3,
      path19: teamColors.team4,
    };

    for (const [id, color] of Object.entries(areaTeamAssignment)) {
      const path = document.getElementById(id);
      if (path) {
        path.style.fill = color;
      }
    }

    function hexToRgb(hex) {
      const bigint = parseInt(hex.slice(1), 16);
      const r = (bigint >> 16) & 255;
      const g = (bigint >> 8) & 255;
      const b = bigint & 255;
      return `rgb(${r}, ${g}, ${b})`;
    }

    function updateLeaderboard() {
      const counts = { team1: 0, team2: 0, team3: 0, team4: 0 };
      const zones = document.querySelectorAll('.zone');
      const teamColorsRgb = {
        team1: hexToRgb(teamColors.team1),
        team2: hexToRgb(teamColors.team2),
        team3: hexToRgb(teamColors.team3),
        team4: hexToRgb(teamColors.team4)
      };

      zones.forEach(zone => {
        const fill = getComputedStyle(zone).fill;
        if (fill === teamColorsRgb.team1) counts.team1++;
        else if (fill === teamColorsRgb.team2) counts.team2++;
        else if (fill === teamColorsRgb.team3) counts.team3++;
        else if (fill === teamColorsRgb.team4) counts.team4++;
      });

      document.getElementById('score-team1').textContent = counts.team1;
      document.getElementById('score-team2').textContent = counts.team2;
      document.getElementById('score-team3').textContent = counts.team3;
      document.getElementById('score-team4').textContent = counts.team4;
    }

    updateLeaderboard();

    const logbook = [];
    const maxLogEntries = 5;

    const teamNames = {
      [teamColors.team1]: 'Team 1',
      [teamColors.team2]: 'Team 2',
      [teamColors.team3]: 'Team 3',
    };

    function logAreaChange(teamColor, zoneId) {
      const now = new Date();
      const hhmm = now.toTimeString().slice(0, 5);
      const team = teamNames[teamColor] || 'Onbekend team';
      const message = `${hhmm} ${team} heeft gebied ${zoneId} veroverd!`;

      logbook.unshift(message);
      if (logbook.length > maxLogEntries) logbook.pop();

      renderLogbook();
    }

    function renderLogbook() {
      const ul = document.getElementById('log-entries');
      ul.innerHTML = '';
      for (const entry of logbook) {
        const li = document.createElement('li');
        li.textContent = entry;
        ul.appendChild(li);
      }
    }

    function getCountdownTimes() {
      const now = new Date();
      let startTime = new Date(now);
      startTime.setHours(22, 20, 0, 0);
      if (now < startTime) startTime.setDate(startTime.getDate() - 1);
      const endTime = new Date(startTime.getTime() + 2 * 60 * 60 * 1000);
      return { now, endTime };
    }

    function updateCountdown() {
      const { now, endTime } = getCountdownTimes();
      let diff = endTime - now;
      if (diff < 0) diff = 0;

      const hours = Math.floor(diff / 1000 / 60 / 60);
      const minutes = Math.floor((diff / 1000 / 60) % 60);
      const seconds = Math.floor((diff / 1000) % 60);

      document.getElementById('hours').textContent = String(hours).padStart(2, '0');
      document.getElementById('minutes').textContent = String(minutes).padStart(2, '0');
      document.getElementById('seconds').textContent = String(seconds).padStart(2, '0');
    }

    setInterval(updateCountdown, 1000);
    updateCountdown();
  </script>

</body>
</html>
